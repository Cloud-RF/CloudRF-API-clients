<html>

<head>

<script>
if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
 } else {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

function sendRequest(){
	var ob = JSON.parse(document.getElementById("json").innerHTML);
	var url="https://cloudrf.com/API/path?"
	for(var val in ob){
		url=url+"&"+val+"="+ob[val];
	}
	xmlhttp.onreadystatechange = function() {
	    if (this.readyState == 4 && this.status == 200) {
		ob=JSON.parse(this.responseText);
	       document.getElementById("out").innerHTML = "<pre>"+this.responseText+"</pre>";
		//document.getElementById("image").innerHTML = "<img width=\"400\" src=\""+ob.PNG_Mercator+"\"/>";
	    }
	};
	document.getElementById("out").innerHTML = "Loading...";
	xmlhttp.open("POST", url, true);
	xmlhttp.send();
}
</script>

</head>
<body>
<h1>Javascript path profile / Ptp</h1>
<h3><a href="https://api.cloudrf.com">https://api.cloudrf.com</a></h3>
Charts are now generated client side. If you want to see a Plotly example then <a href="https://cloudrf.com/API/path?lat=50.37212759641256&lon=-4.47718620300293&txh=22&rlat=50.38876646032618&rlon=-4.46019172668457&rxh=2&dis=m&frq=2450&txw=0.1&ant=39&azi=0&hbw=90&vbw=90&tlt=0&fbr=0.01&txg=2.14&rxg=2.15&pm=1&pe=2&res=20&uid=21531&key=a8ec44b5ad85e0ab626e55f20e3cb5da111999a2&cll=0&raw=1&engine=2&file=html">click here</a>
<hr>
<textarea cols="60" rows="10" id="json">
{
	"uid": 21531,
	"key": "a8ec44b5ad85e0ab626e55f20e3cb5da111999a2",
	"txg": 2.15,
	"azi": 0,
	"ant": 38,
	"clh": 1,
	"cli": 5,
	"cll": 1,
	"col": 10,
	"rxs": -90,
	"dis": "m",
	"fmt": 4,
	"frq": 868,
	"lat": 50.355,
	"lon": -4.152,
	"rlat": 50.36,
	"rlon": -4.145,
	"nam": "Tx",
	"out": 2,
	"rad": 10,
	"rxh": 2,
	"rxg": 2.15,
	"res": 60,
	"ter": 15,
	"tlt": 0,
	"txh": 2,
	"txw": 1,
	"engine":2
}
</textarea>
<br>
<a href="#" onclick="sendRequest()">CALCULATE PATH</a>
<table>
<td id="out"><td id="image">
</table>
<hr>
<center>
CloudRF.com
</body>
</html>
